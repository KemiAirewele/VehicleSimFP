
struct MyPerceptionType
    time::Float64
    vehicles::Int
end

struct SimpleKartState
    vehicle_id::Int
    position::SVector{3, Float64} # position of center of vehicle
    orientation::SVector{4, Float64} # represented as quaternion
    velocity::SVector{3, Float64}
    size::SVector{3, Float64} # length, width, height of 3d bounding box centered at (position/orientation)
end

function perception(cam_meas_channel, localization_state_channel, perception_state_channel)
    # set up stuff
    while true
        fresh_cam_meas = []
        while isready(cam_meas_channel)
            meas = take!(cam_meas_channel)
            push!(fresh_cam_meas, meas)
        end

        # write h to turn simple state vehicle to BOUNDING box
        # return a percept type that gives time as well as list of means of seen vehicles
        latest_localization_state = (localization_state_channel)
        
        # process bounding boxes / run ekf / do what you think is good

        perception_state = MyPerceptionType(0,0.0)
        if isready(perception_state_channel)
            take!(perception_state_channel)
        end
        put!(perception_state_channel, perception_state)
    end
end


